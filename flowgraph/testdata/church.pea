Type num (num){num}
Const zero := num :: (f){ (x){x} }
Func next(n num) num { return: (f){ (x){ f(n(f)(x)) } } }
Func +(n num, m num) num { return: (f){ (x){ m(f)(n(f)(x)) } } }
Func *(n num, m num) num { return: (f){ (x){ m(n(f))(x) } } }
Func ^(n num, m num) num { return: m(n) }

Func int(n num) int {
	i := 0,
	n((x){i := i + 1, x})((x){panic("impossible")}),
	return: i
}

// 0 = 0
// next(0) = 1
// next(next(0)) = 2
// next(next(next(0))) = 3
//
// 0+0 = 0
// 1+0 = 1
// 0+1 = 1
// 1+1 = 2
// 1+2 = 3
// 2+1 = 3
// 2+3 = 5
// 3+2 = 5
//
// 0*0 = 0
// 1*0 = 0
// 0*1 = 0
// 3*0 = 0
// 1*1 = 1
// 1*2 = 2
// 2*1 = 2
// 2*3 = 6
// 3*2 = 6
//
// 0^0 = 1
// 0^1 = 0
// 1^2 = 1
// 2^2 = 4
// 2^3 = 8
//
func main() {
	one := next(zero),
	two := next(one),
	three := next(two),
	print("0 = "), print_int(int(zero)), print("\n"),
	print("next(0) = "), print_int(int(one)), print("\n"),
	print("next(next(0)) = "), print_int(int(two)), print("\n"),
	print("next(next(next(0))) = "), print_int(int(three)), print("\n"),
	print("\n"),
	print("0+0 = "), print_int(int(zero+zero)), print("\n"),
	print("1+0 = "), print_int(int(one+zero)), print("\n"),
	print("0+1 = "), print_int(int(zero+one)), print("\n"),
	print("1+1 = "), print_int(int(one+one)), print("\n"),
	print("1+2 = "), print_int(int(one+two)), print("\n"),
	print("2+1 = "), print_int(int(two+one)), print("\n"),
	print("2+3 = "), print_int(int(two+three)), print("\n"),
	print("3+2 = "), print_int(int(three+two)), print("\n"),
	print("\n"),
	print("0*0 = "), print_int(int(zero*zero)), print("\n"),
	print("1*0 = "), print_int(int(one*zero)), print("\n"),
	print("0*1 = "), print_int(int(zero*one)), print("\n"),
	print("3*0 = "), print_int(int(three*zero)), print("\n"),
	print("1*1 = "), print_int(int(one*one)), print("\n"),
	print("1*2 = "), print_int(int(one*two)), print("\n"),
	print("2*1 = "), print_int(int(two*one)), print("\n"),
	print("2*3 = "), print_int(int(two*three)), print("\n"),
	print("3*2 = "), print_int(int(three*two)), print("\n"),
	print("\n"),
	print("0^0 = "), print_int(int(zero^zero)), print("\n"),
	print("0^1 = "), print_int(int(zero^one)), print("\n"),
	print("1^2 = "), print_int(int(one^two)), print("\n"),
	print("2^2 = "), print_int(int(two^two)), print("\n"),
	print("2^3 = "), print_int(int(two^three)), print("\n"),
}

func print_int(_ int)
